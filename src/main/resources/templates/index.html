<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>WorkWise Html Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/animate.css}" href="../static/css/animate.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/line-awesome.css}" href="../static/css/line-awesome.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/line-awesome-font-awesome.min.css}"
          href="../static/css/line-awesome-font-awesome.min.css">
    <link rel="stylesheet" type="text/css" th:href="@{/vendor/fontawesome-free/css/all.min.css}"
          href="../static/vendor/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/font-awesome.min.css}"
          href="../static/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/jquery.mCustomScrollbar.min.css}"
          href="../static/css/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" type="text/css" th:href="@{/lib/slick/slick.css}" href="../static/lib/slick/slick.css">
    <link rel="stylesheet" type="text/css" th:href="@{/lib/slick/slick-theme.css}"
          href="../static/lib/slick/slick-theme.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" href="../static/css/style.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/responsive.css}" href="../static/css/responsive.css">
</head>

<body>
<div class="wrapper" th:classappend="${post} ? overlay : ''">
    <header>
        <div class="container">
            <div class="header-data">
                <div class="logo">
                    <a href="index.html" title=""><img th:src="@{/images/logo.png}" alt=""></a>
                </div><!--logo end-->
                <div class="search-bar">
                    <form>
                        <input type="text" name="search" placeholder="Search...">
                        <button type="submit"><i class="la la-search"></i></button>
                    </form>
                </div><!--search-bar end-->
                <nav>
                    <ul>
                        <li>
                            <a th:href="@{/}" title="">
                                <span><img th:src="@{/images/icon1.png}" alt=""></span>
                                Home
                            </a>
                        </li>
                        <li>
                            <a href="profiles.html" title="">
                                <span><img th:src="@{/images/icon4.png}" alt=""></span>
                                Profiles
                            </a>
                            <ul>
                                <li><a th:href="@{/user/showMyProfile}" title="">User Profile</a></li>
                                <li><a href="my-profile-feed.html" title="">my-profile-feed</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" title="" class="not-box-open">
                                <span><img th:src="@{/images/icon7.png}" alt=""></span>
                                Notification
                            </a>
                            <div class="notification-box noti" id="notification">
                                <div class="nt-title">
                                    <h4>Setting</h4>
                                    <a href="#" title="">Clear all</a>
                                </div>
                                <div class="nott-list">
                                    <div class="notfication-details">
                                        <div class="noty-user-img">
                                            <img src="../static/images/resources/ny-img1.png" alt="">
                                        </div>
                                        <div class="notification-info">
                                            <h3><a href="#" title="">Jassica William</a> Comment on your project.</h3>
                                            <span>2 min ago</span>
                                        </div><!--notification-info -->
                                    </div>
                                    <div class="notfication-details">
                                        <div class="noty-user-img">
                                            <img src="../static/images/resources/ny-img2.png" alt="">
                                        </div>
                                        <div class="notification-info">
                                            <h3><a href="#" title="">Jassica William</a> Comment on your project.</h3>
                                            <span>2 min ago</span>
                                        </div><!--notification-info -->
                                    </div>
                                    <div class="notfication-details">
                                        <div class="noty-user-img">
                                            <img src="../static/images/resources/ny-img3.png" alt="">
                                        </div>
                                        <div class="notification-info">
                                            <h3><a href="#" title="">Jassica William</a> Comment on your project.</h3>
                                            <span>2 min ago</span>
                                        </div><!--notification-info -->
                                    </div>
                                    <div class="notfication-details">
                                        <div class="noty-user-img">
                                            <img src="../static/images/resources/ny-img2.png" alt="">
                                        </div>
                                        <div class="notification-info">
                                            <h3><a href="#" title="">Jassica William</a> Comment on your project.</h3>
                                            <span>2 min ago</span>
                                        </div><!--notification-info -->
                                    </div>
                                    <div class="view-all-nots">
                                        <a href="#" title="">View All Notification</a>
                                    </div>
                                </div><!--nott-list end-->
                            </div><!--notification-box end-->
                        </li>
                        <li>
                            <a th:href="@{/login}" title="">
                                <span><img th:src="@{/images/icon3.png}" alt=""></span>
                                Login
                            </a>
                        </li>
                    </ul>
                </nav><!--nav end-->
                <div class="menu-btn">
                    <!--TODO menu button-->
                    <a th:href="@{#}" title=""><i class="fa fa-bars"></i></a>
                </div><!--menu-btn end-->
                <div class="user-account">
                    <div class="user-info" th:if="${user != null}">
						<!--TODO user profile picture-->
                        <img th:if="${user.getPhoto()}" style="height: 30px;width: 30px;" th:src="@{'/user/' + ${user.getId()} + '/userImage'}"  alt="">
                        <img th:if="${user.getPhoto() == null}" style="height: 30px;width: 30px;" th:src="@{/images/resources/anonymous-user.png}" alt="">
                        <a href="#" th:text="${#authentication.name == 'anonymousUser' ? '' : #authentication.name}"></a>
                    </div>
                    <div class="user-account-settingss" id="users">
                        <h3>Online Status</h3>
                        <ul class="on-off-status">
                            <li>
                                <div class="fgt-sec">
                                    <input type="radio" name="cc" id="c5">
                                    <label for="c5">
                                        <span></span>
                                    </label>
                                    <small>Online</small>
                                </div>
                            </li>
                            <li>
                                <div class="fgt-sec">
                                    <input type="radio" name="cc" id="c6">
                                    <label for="c6">
                                        <span></span>
                                    </label>
                                    <small>Offline</small>
                                </div>
                            </li>
                        </ul>
                        <h3>Custom Status</h3>
                        <div class="search_form">
                            <form>
                                <input type="text" name="search">
                                <button type="submit">Ok</button>
                            </form>
                        </div><!--search_form end-->
                        <h3>Setting</h3>
                        <ul class="us-links">
                            <li><a href="user-settings.html" title="">Account Setting</a></li>
                            <li><a href="#" title="">Privacy</a></li>
                            <li><a href="#" title="">Faqs</a></li>
                            <li><a href="#" title="">Terms & Conditions</a></li>
                        </ul>
                        <h3 class="tc"><a href="sign-in.html" title="">Logout</a></h3>
                    </div><!--user-account-settingss end-->
                </div>
            </div><!--header-data end-->
        </div>
    </header><!--header end-->

    <main>
        <div class="main-section">
            <div class="container">
                <div class="main-section-data">
                    <div class="row">
                        <div class="col-lg-3 col-md-4 pd-left-none no-pd">
                            <div class="main-left-sidebar no-margin">
                                <div class="user-data full-width" sec:authorize="hasRole('ROLE_USER')">
                                    <div class="user-profile">
                                        <div class="username-dt">
                                            <div class="usr-pic">
											<!--TODO get user profile picture-->
                                                <img th:src="@{/images/resources/user-pic.png}" alt="">
                                            </div>
                                        </div><!--username-dt end-->
                                        <div class="user-specs">
                                            <h3>John Doe</h3>
                                            <span>Graphic Designer at Self Employed</span>
                                        </div>
                                    </div><!--user-profile end-->
                                    <ul class="user-fw-status">
                                        <li>
                                            <h4>Friends</h4>
											<!--TODO get users friends count-->
                                            <span>155</span>
                                        </li>
                                        <li>
                                            <a href="my-profile.html" title="">View Profile</a>
                                        </li>
                                    </ul>
                                </div><!--user-data end-->
                            </div><!--main-left-sidebar end-->
                        </div>
                        <div class="col-lg-6 col-md-8 no-pd">
                            <div class="main-ws-sec">
                                <div class="post-topbar" sec:authorize="hasRole('ROLE_USER')">
                                    <div class="user-picy">
                                        <!--TODO get user profile picture-->
                                        <img th:src="@{/images/resources/user-pic.png}" alt="">
                                    </div>
                                    <div class="post-st">
                                        <ul>
                                            <li><a class="post-jb active" th:href="@{/post/new}" href="#"
                                                   title="">Post</a></li>
                                        </ul>
                                    </div><!--post-st end-->
                                </div><!--post-topbar end-->
                                <ul>
                                    <li th:each="post : ${posts}">
                                        <div class="posts-section">
                                            <div class="post-bar">
                                                <div class="posty">
                                                    <div class="post-bar no-margin">
                                                        <div class="post_topbar">
                                                            <div class="usy-dt">
                                                                <img th:src="@{/images/resources/us-pc2.png}" alt="">
                                                                <!--TODO get user profile picture-->
                                                                <div class="usy-name">
                                                                    <h3 th:text="${post.createdBy.getUsername()}">John
                                                                        Doe</h3>
                                                                    <span th:text="${post.getDateTime()}"><img th:src="@{/images/clock.png}" alt="">3 min ago</span>
                                                                </div>
                                                            </div>
                                                            <div class="ed-opts">
                                                                <a href="#" title="" class="ed-opts-open"><i
                                                                        class="la la-ellipsis-v"></i></a>
                                                                <ul class="ed-options">
                                                                    <li><a href="#" title="">Edit Post</a></li>
                                                                    <li><a href="#" title="">Unsaved</a></li>
                                                                    <li><a href="#" title="">Unbid</a></li>
                                                                    <li><a href="#" title="">Close</a></li>
                                                                    <li><a href="#" title="">Hide</a></li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="epi-sec">
                                                            <ul class="descp">
                                                                <!--TODO location-->
                                                                <li><img th:src="@{/images/icon9.png}" alt=""><span>Bulgaria</span>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div class="job_descp">
                                                            <p th:text="${post.text}">Lorem ipsum dolor sit amet <a href="#" title="">view more</a></p>
                                                        </div>
                                                        <div class="job-status-bar">
                                                            <ul class="like-com">
                                                                <li>
                                                                    <a href="#"><i class="fas fa-heart"></i> Like</a>
                                                                    <!--TODO get pictures of all users who like the post-->
                                                                    <img th:src="@{/images/liked-img.png}" alt="">
                                                                    <span>25</span>
                                                                </li>
                                                                <li><a href="#" class="com"><i
                                                                        class="fas fa-comment-alt"></i> Comment 15</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div><!--post-bar end-->
                                                    <div class="comment-section">
                                                        <div class="comment-sec"
                                                             th:if="${post.getComments().size() > 0}">
                                                            <ul>
                                                                <li th:each="comment : ${post.getComments()}">
                                                                    <div class="comment-list">
                                                                        <div class="bg-img">
                                                                            <img th:src="@{/images/resources/bg-img1.png}"
                                                                                 alt="">
                                                                        </div>
                                                                        <div class="comment">
                                                                            <h3 th:text="${comment.getUser().getUsername()}">John Doe</h3>
                                                                            <span th:text="${comment.getDateTime()}"><img th:src="@{/images/clock.png}"
                                                                                       alt=""></span>
                                                                            <p th:text="${comment.getDescription()}">Lorem ipsum dolor sit amet, </p>
																				<!--TODO reply comments-->
                                                                            <a href="#" title="" class="active"><i
                                                                                    class="fa fa-reply-all"></i>Reply</a>
                                                                        </div>
                                                                    </div><!--comment-list end-->
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div class="comment-sec"
                                                             th:if="${post.getComments().size() == 0}">
                                                            <p>No comments</p>
                                                        </div>
                                                        <!--comment-sec end-->
                                                        <div class="post-comment">
                                                            <div class="cm_img">
                                                                <img src="../static/images/resources/bg-img4.png"
                                                                     alt="">
                                                            </div>
                                                            <div class="comment_box">
                                                                <form>
                                                                    <input type="text" placeholder="Post a comment">
                                                                    <button type="submit">Send</button>
                                                                </form>
                                                                <form th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')') or #authentication.name == post.createdBy.username}" id="deleteForm" action="javascript:void(0)" method="post">
                                                                    <button class="btn btn-danger" type="submit" th:onclick="|completeAndRedirect('${post.id}')|" style="margin-top:2px">Delete Post</button>
                                                                </form>
                                                            </div>
                                                        </div><!--post-comment end-->
                                                    </div><!--comment-section end-->
                                                </div><!--posty end-->
                                            </div><!--post-bar end-->
                                        </div><!--posts-section end-->
                                    </li>
                                </ul>

                            </div><!--main-ws-sec end-->
                        </div>
                        <div class="col-lg-3 pd-right-none no-pd" >
                            <div class="right-sidebar">
                                <div class="widget widget-about">
                                    <img th:src="@{/images/wd-logo.png}" alt="">
                                    <h3>Track Time on Workwise</h3>
                                    <span>Pay only for the Hours worked</span>
                                    <div class="sign_link">
                                        <h3><a th:href="@{/register}" href="sign-in.html" title="">Sign up</a></h3>
                                    </div>
                                </div>
								<div class="suggestions full-width">
									<div class="sd-title">
										<h3>Suggestions</h3>
										<i class="la la-ellipsis-v"></i>
									</div><!--sd-title end-->
									<div class="suggestions-list">
										<div class="suggestion-usd">
											<img src="../static/images/resources/s1.png" alt="">
											<div class="sgt-text">
												<h4>Jessica William</h4>
												<span>Graphic Designer</span>
											</div>
											<span><i class="la la-plus"></i></span>
										</div>
										<div class="suggestion-usd">
											<img src="../static/images/resources/s2.png" alt="">
											<div class="sgt-text">
												<h4>John Doe</h4>
												<span>PHP Developer</span>
											</div>
											<span><i class="la la-plus"></i></span>
										</div>
										<div class="suggestion-usd">
											<img src="../static/images/resources/s3.png" alt="">
											<div class="sgt-text">
												<h4>Poonam</h4>
												<span>Wordpress Developer</span>
											</div>
											<span><i class="la la-plus"></i></span>
										</div>
										<div class="suggestion-usd">
											<img src="../static/images/resources/s4.png" alt="">
											<div class="sgt-text">
												<h4>Bill Gates</h4>
												<span>C & C++ Developer</span>
											</div>
											<span><i class="la la-plus"></i></span>
										</div>
										<div class="suggestion-usd">
											<img src="../static/images/resources/s5.png" alt="">
											<div class="sgt-text">
												<h4>Jessica William</h4>
												<span>Graphic Designer</span>
											</div>
											<span><i class="la la-plus"></i></span>
										</div>
										<div class="suggestion-usd">
											<img src="../static/images/resources/s6.png" alt="">
											<div class="sgt-text">
												<h4>John Doe</h4>
												<span>PHP Developer</span>
											</div>
											<span><i class="la la-plus"></i></span>
										</div>
										<div class="view-more">
											<a href="#" title="">View More</a>
										</div>
									</div><!--suggestions-list end-->
								</div><!--suggestions end-->
                            </div><!--right-sidebar end-->
                        </div>
                    </div>
                </div><!-- main-section-data end-->
            </div>
        </div>
    </main>

    <div th:if="${post}" class="post-popup job_post" th:classappend="${post} ? active : ''">
        <div class="post-project">
            <h3>Create new post</h3>
            <div class="post-project-fields">
                <form action="#" th:action="@{/post/add}" method="post" th:object="${post}">
                    <div class="row">
                        <div class="col-lg-12">
                            <textarea name="description" placeholder="Description" th:field="*{text}"></textarea>
                        </div>
                        <div class="col-lg-12">
                            <input type="checkbox" style="width: auto;height: auto;margin: auto" name="cc" id="c1" th:field="*{isPublic}">
                            <label for="c1">
                                Make post public?
                            </label>
                        </div>
                        <div class="col-lg-12">
                            <ul>
                                <li>
                                    <button class="active" type="submit" value="post" >Post</button>
                                </li>
                                <li><a href="#" title="" th:href="@{/}">Cancel</a></li>
                            </ul>
                        </div>
                    </div>
                </form>
            </div><!--post-project-fields end-->
            <a href="#" title="" th:href="@{/}"><i class="la la-times-circle-o"></i></a>
        </div><!--post-project end-->
    </div><!--post-project-popup end-->
</div><!--theme-layout end-->
<!--Todo delete confirmation -->
<script>
    function completeAndRedirect(postId){
        let r = confirm("Are you sure you want to delete this post?");
        if (r == true) {
            document.getElementById("deleteForm").action = '/post/delete/' + postId + '/';
            document.getElementById("deleteForm").submit();
        }
    }
</script>
<script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/js/popper.js}"></script>
<script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery.mCustomScrollbar.js}"></script>
<script type="text/javascript" th:src="@{/lib/slick/slick.min.js}"></script>
<script type="text/javascript" th:src="@{/js/scrollbar.js}"></script>
<script type="text/javascraipt" th:src="@{/js/script.js}"></script>

</body>
</html>